{% extends "base.html" %}
{% block content %}
<div class="row" style="margin-bottom: 0;">

  <div class="col l6">
    <h4 class="white-text">Users</h4>
  </div>

  <div class="col l6">
    <a class="modal-trigger" href="#addusermodal"><h4 class="btn-floating green darken pulse right"><i class="material-icons">add</i></h4></a>
  </div>

  <div class="modal" id="addusermodal">
    <div class="modal-content" style="margin: 10px;">
      <form class="" action="{{url_for('add_user')}}" method="post">
        <div class="input-field required">
          <input type="text" id="username" name="username" required>
          <label for="username">Add User Name</label>
        </div>
        <div class="input-field required">
          <input type="password" id="password" name="password" required>
          <label for="password">Enter Password</label>
        </div>
        <div class="input-field required">
          <input type="email" id="email" name="email" required>
          <label for="email">Add Email</label>
        </div>
        <div class="input-field">
          <select name="desig">
            <option value="admin">Admin</option>
            <option value="operator">Operator</option>
          </select>
          <label>Add User's Role</label>
        </div>

        <div class="input-field right">
          <button type="submit" class="btn green darken-3">Confirm</button>
        </div>
      </form>
    </div>
  </div>

</div>

<div class="divider"></div>

<div class="row" style="margin-top: 10px;">
  {% for usr in data %}


      <!-- <div class="card-image">
      <img src="images/admin.jpg" alt="">
    </div> -->

    {% if session['role']=='superadmin' %}

      <div class="col l3">
        <div class="card small">
    <div class="card-content">
      <span class="card-title activator">{{usr.username}}<i class="material-icons right">more_vert</i></span>
      <p><b>{{usr.designation}}</b></p>
    </div>
    <div class="card-reveal">
      <span class="card-title grey-text text-darken-4">Details<i class="material-icons right">close</i></span>
      <div class="divider"></div>
      <p>{{usr.username}}</p>
      <p>{{usr.designation}}</p>
      <p>{{usr.email}}</p>
      <div class="divider"></div>
      <div class="container" style="margin-top: 5px; padding: 5px;">
        <a href="#{{usr.username}}editusermodal" class="btn-floating orange right modal-trigger" style="margin-left: 10px;"><i class="material-icons">edit</i></a>

            <button type="button" class="btn-floating red right"  onclick="del_rec({{usr.id}})"><i class="material-icons">delete</i></button>

      </div>
    </div>
  </div>
  </div>
    {% elif session['role'] == 'admin' %}
      {% if usr.designation != "superadmin" %}

        <div class="col l3">
          <div class="card small">
          <div class="card-content">
            <span class="card-title activator">{{usr.username}}<i class="material-icons right">more_vert</i></span>
            <p><b>{{usr.designation}}</b></p>
          </div>
          <div class="card-reveal">
            <span class="card-title grey-text text-darken-4">Details<i class="material-icons right">close</i></span>
            <div class="divider"></div>
            <p>{{usr.username}}</p>
            <p>{{usr.designation}}</p>
            <p>{{usr.email}}</p>
            <div class="divider"></div>
            <div class="container" style="margin-top: 5px; padding: 5px;">
              <a href="#{{usr.username}}editusermodal" class="btn-floating orange right modal-trigger" style="margin-left: 10px;"><i class="material-icons">edit</i></a>

                  <button type="button" class="btn-floating red right"  onclick="del_rec({{usr.id}})"><i class="material-icons">delete</i></button>

            </div>
          </div>
        </div>
        </div>
        {% endif %}
    {% endif %}


  <div class="modal" id="{{usr.username}}editusermodal">
    <div class="modal-content">
      <form class="" action="{{url_for('update_user')}}" method="post">
          <input type="text" id="hidden_id2" name="hidden_id2" value="{{usr.id}}" hidden>
        <div class="input-field required">
          <input type="text" id="username" name="username" value={{usr.username}} required>
          <label for="username">Add User Name</label>
        </div>
        <div class="input-field required">
          <input type="password" id="password" name="password" required>
          <label for="password">Enter Password</label>
        </div>
        <div class="input-field required">
          <input type="email" id="email" name="email" value={{usr.email}} required>
          <label for="email">Add Email</label>
        </div>
        <div class="input-field">
          <select name="desig">
            {% if usr.designation == "Operator" %}
            <option value="admin">Admin</option>
            <option value="operator" selected>Operator</option>
            {% else %}
            <option value="admin" selected>Admin</option>
            <option value="operator">Operator</option>
            {% endif %}

          </select>
          <label>Add User's Role</label>
        </div>

        <div class="input-field right">
          <button type="submit" class="btn green darken-3">Confirm</button>
        </div>
      </form>
    </div>
  </div>

  {% endfor %}

</div>

{% endblock %}

{% block foot_js %}
<script src="static/js/myjs/sweetalert.js"></script>
<script src="static/js/user.js"></script>

{% endblock %}
